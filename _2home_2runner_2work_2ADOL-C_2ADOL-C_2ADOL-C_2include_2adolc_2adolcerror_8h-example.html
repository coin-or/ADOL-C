<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ADOL-C: Automatic Differentiation in C/C++: /home/runner/work/ADOL-C/ADOL-C/ADOL-C/include/adolc/adolcerror.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ADOL-C: Automatic Differentiation in C/C++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">/home/runner/work/ADOL-C/ADOL-C/ADOL-C/include/adolc/adolcerror.h</div></div>
</div><!--header-->
<div class="contents">
<p>Exception class for ADOL-C errors with source location tracking.</p>
<p>Exception class for ADOL-C errors with source location tracking.This exception captures the error message and the source location (file, line, column) where it was thrown. Integrates with the C++ standard exception hierarchy through std::runtime_error.</p>
<p>Throw example: </p><div class="fragment"><div class="line"><span class="keywordflow">throw</span> ADOLCError(<span class="stringliteral">&quot;wrong number of independents&quot;</span>);  <span class="comment">// Auto-captures source</span></div>
<div class="line">location</div>
</div><!-- fragment --><p>Handle example: </p><div class="fragment"><div class="line"><span class="keywordflow">try</span> {</div>
<div class="line">  <span class="comment">// ADOL-C operations...</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">catch</span> (ADOLCError&amp; e) {</div>
<div class="line">  std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;         <span class="comment">// Formatted message</span></div>
<div class="line">  std::cerr &lt;&lt; <span class="stringliteral">&quot;Error occurred at: &quot;</span></div>
<div class="line">            &lt;&lt; e.where().file() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div>
<div class="line">            &lt;&lt; e.where().func() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div>
<div class="line">            &lt;&lt; e.where().line() &lt;&lt; std::endl; <span class="comment">// Direct source location</span></div>
<div class="line">access</div>
<div class="line">}</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">/*----------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment"> ADOL-C -- Automatic Differentiation by Overloading in C++</span></div>
<div class="line"><span class="comment"> File:     adolcerror.h</span></div>
<div class="line"><span class="comment"> Revision: $Id$</span></div>
<div class="line"><span class="comment"> Contents: handling of fatal errors</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment"> Copyright (c) Kshitij Kulshreshtha</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment"> This file is part of ADOL-C. This software is provided as open source.</span></div>
<div class="line"><span class="comment"> Any use, reproduction, or distribution of the software constitutes</span></div>
<div class="line"><span class="comment"> recipient&#39;s acceptance of the terms of the accompanying license file.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">---------------------------------------------------------------------------*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef ADOLC_ERROR_H</span></div>
<div class="line"><span class="preprocessor">#define ADOLC_ERROR_H</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdexcept&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string_view&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;type_traits&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Macro to obtain location information easily</span></div>
<div class="line"><span class="preprocessor">#define CURRENT_LOCATION                                                       \</span></div>
<div class="line"><span class="preprocessor">  ADOLCError::ADOLCError::makeSourceLocation(__FILE__, __func__, __LINE__)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>ADOLCError {</div>
<div class="line"> </div>
<div class="line"><span class="comment">// std::source_location is too new, implement own variant</span></div>
<div class="line"><span class="comment">// used in combination with macro CURRENT_LOCATION</span></div>
<div class="line"><span class="keyword">struct </span>source_location {</div>
<div class="line"> </div>
<div class="line">  std::string_view file_;</div>
<div class="line">  std::string_view func_;</div>
<div class="line">  <span class="keywordtype">int</span> line_;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">constexpr</span> source_location(std::string_view file, std::string_view func,</div>
<div class="line">                            <span class="keywordtype">int</span> line)</div>
<div class="line">      : file_(file), func_(func), line_(line) {}</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">constexpr</span> std::string_view file()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> file_; }</div>
<div class="line">  <span class="keyword">constexpr</span> std::string_view func()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> func_; }</div>
<div class="line">  <span class="keyword">constexpr</span> <span class="keywordtype">int</span> line()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> line_; }</div>
<div class="line">};</div>
<div class="line"><span class="keyword">class </span>ADOLCError : <span class="keyword">public</span> std::runtime_error {</div>
<div class="line"> </div>
<div class="line">  source_location info_;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  ADOLCError(std::string_view message, <span class="keyword">const</span> source_location &amp;info)</div>
<div class="line">      : std::runtime_error(makeMessage(message, info)), info_(info) {}</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">constexpr</span> <span class="keyword">static</span> source_location</div>
<div class="line">  makeSourceLocation(std::string_view file, std::string_view func, <span class="keywordtype">int</span> line) {</div>
<div class="line">    <span class="keywordflow">return</span> source_location(file, func, line);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">static</span> std::string makeMessage(std::string_view message,</div>
<div class="line">                                 <span class="keyword">const</span> source_location &amp;info) {</div>
<div class="line">    std::ostringstream oss;</div>
<div class="line">    oss &lt;&lt; message &lt;&lt; <span class="stringliteral">&quot;\n[Source] &quot;</span> &lt;&lt; info.file() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; info.func() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div>
<div class="line">        &lt;&lt; info.line();</div>
<div class="line">    <span class="keywordflow">return</span> oss.str();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">const</span> source_location &amp;where() <span class="keyword">const</span> <span class="keyword">noexcept</span> { <span class="keywordflow">return</span> info_; }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum class</span> ErrorType : <span class="keywordtype">size_t</span> {</div>
<div class="line">  MALLOC_FAILED,</div>
<div class="line">  INTEGER_TAPE_FOPEN_FAILED,</div>
<div class="line">  INTEGER_TAPE_FREAD_FAILED,</div>
<div class="line">  VALUE_TAPE_FOPEN_FAILED,</div>
<div class="line">  VALUE_TAPE_FREAD_FAILED,</div>
<div class="line">  TAPE_TO_OLD,</div>
<div class="line">  WRONG_LOCINT_SIZE,</div>
<div class="line">  MORE_STAT_SPACE_REQUIRED,</div>
<div class="line">  ACTIVE_SUBSCRIPTING,</div>
<div class="line">  NO_SUCH_OP,</div>
<div class="line">  CANNOT_OPEN_FILE,</div>
<div class="line">  NO_MINMAX,</div>
<div class="line">  SWITCHES_MISMATCH,</div>
<div class="line">  NO_COLPACK,</div>
<div class="line">  NO_TAPE_ID,</div>
<div class="line">  TAPE_ALREADY_EXIST,</div>
<div class="line">  TAY_NULLPTR,</div>
<div class="line">  SIZE_MISMATCH,</div>
<div class="line">  TO_MANY_DIRECTIONS,</div>
<div class="line"> </div>
<div class="line">  TAPING_BUFFER_ALLOCATION_FAILED,</div>
<div class="line">  TAPING_TBUFFER_ALLOCATION_FAILED,</div>
<div class="line">  TAPING_READ_ERROR_IN_TAYLOR_CLOSE,</div>
<div class="line">  TAPING_TO_MANY_TAYLOR_BUFFERS,</div>
<div class="line">  TAPING_TO_MANY_LOCINTS,</div>
<div class="line">  TAPING_STORE_REALLOC_FAILED,</div>
<div class="line">  TAPING_FATAL_IO_ERROR,</div>
<div class="line">  TAPING_TAPE_STILL_IN_USE,</div>
<div class="line">  TAPING_TAYLOR_OPEN_FAILED,</div>
<div class="line">  TAPING_NOT_ACTUALLY_TAPING,</div>
<div class="line"> </div>
<div class="line">  EVAL_SEEK_VALUE_STACK,</div>
<div class="line">  EVAL_OP_TAPE_READ_FAILED,</div>
<div class="line">  EVAL_VAL_TAPE_READ_FAILED,</div>
<div class="line">  EVAL_LOC_TAPE_READ_FAILED,</div>
<div class="line">  EVAL_TAY_TAPE_READ_FAILED,</div>
<div class="line"> </div>
<div class="line">  REVERSE_NO_TAYLOR_STACK,</div>
<div class="line">  REVERSE_COUNTS_MISMATCH,</div>
<div class="line">  REVERSE_TAYLOR_COUNTS_MISMATCH,</div>
<div class="line">  REVERSE_NO_FOWARD,</div>
<div class="line"> </div>
<div class="line">  PARAM_COUNTS_MISMATCH,</div>
<div class="line"> </div>
<div class="line">  BUFFER_NULLPOINTER_FUNCTION,</div>
<div class="line">  BUFFER_INDEX_TO_LARGE,</div>
<div class="line"> </div>
<div class="line">  EXT_DIFF_NULLPOINTER_STRUCT,</div>
<div class="line">  EXT_DIFF_WRONG_TAPESTATS,</div>
<div class="line">  EXT_DIFF_NULLPOINTER_FUNCTION,</div>
<div class="line">  EXT_DIFF_NULLPOINTER_DIFFFUNC,</div>
<div class="line">  EXT_DIFF_NULLPOINTER_ARGUMENT,</div>
<div class="line">  EXT_DIFF_WRONG_FUNCTION_INDEX,</div>
<div class="line">  EXT_DIFF_LOCATIONGAP,</div>
<div class="line"> </div>
<div class="line">  CHECKPOINTING_CPINFOS_NULLPOINTER,</div>
<div class="line">  CHECKPOINTING_NULLPOINTER_ARGUMENT,</div>
<div class="line">  CHECKPOINTING_NULLPOINTER_FUNCTION,</div>
<div class="line">  CHECKPOINTING_NULLPOINTER_FUNCTION_DOUBLE,</div>
<div class="line">  CHECKPOINTING_REVOLVE_IRREGULAR_TERMINATED,</div>
<div class="line">  CHECKPOINTING_UNEXPECTED_REVOLVE_ACTION,</div>
<div class="line">  CP_STORED_EXCEEDS_CU,</div>
<div class="line">  CP_STORED_EXCEEDS_SNAPS,</div>
<div class="line">  CP_NUMFORW,</div>
<div class="line">  CP_INC_SNAPS,</div>
<div class="line">  CP_SNAPS_EXCEEDS_CU,</div>
<div class="line">  CP_REPS_EXCEEDS_REPSUP,</div>
<div class="line">  CP_TAPE_MISMATCH,</div>
<div class="line">  CP_NO_SUCH_IDX,</div>
<div class="line"> </div>
<div class="line">  WRONG_PLATFORM_32,</div>
<div class="line">  WRONG_PLATFORM_64,</div>
<div class="line"> </div>
<div class="line">  VEC_LOCATIONGAP,</div>
<div class="line"> </div>
<div class="line">  ENABLE_MINMAX_USING_ABS,</div>
<div class="line">  DISABLE_MINMAX_USING_ABS,</div>
<div class="line">  NONPOSITIVE_BASIS,</div>
<div class="line"> </div>
<div class="line">  MYALLOC1,</div>
<div class="line">  MYALLOC2,</div>
<div class="line">  MYALLOC3,</div>
<div class="line">  MYALLOCI2,</div>
<div class="line">  MYALLOC1_UINT,</div>
<div class="line">  MYALLOC1_ULONG,</div>
<div class="line">  MYALLOC2_ULONG,</div>
<div class="line"> </div>
<div class="line">  SM_ACTIVE_VARS,</div>
<div class="line">  SM_SAME_TYPE,</div>
<div class="line">  SM_LOCINT_BLOCK,</div>
<div class="line">  SM_MAX_LIVES,</div>
<div class="line"> </div>
<div class="line">  ADUBREF_CONSTRUCTOR,</div>
<div class="line">  ADUBREF_OOB,</div>
<div class="line">  ADUBREF_SAFE_MODE,</div>
<div class="line">  ADUBREF_VE_REF,</div>
<div class="line">  ADVECTOR_NON_DECREASING,</div>
<div class="line">  ADVECTOR_NON_NEGATIVE,</div>
<div class="line"> </div>
<div class="line">  FP_NO_EDF,</div>
<div class="line">  HO_OP_NOT_IMPLEMENTED,</div>
<div class="line"> </div>
<div class="line">  WRONG_DIM_Y,</div>
<div class="line">  WRONG_DIM_XY,</div>
<div class="line">  WRONG_DIM_U,</div>
<div class="line">  WRONG_DIM_D,</div>
<div class="line">  WRONG_DIM_uZ,</div>
<div class="line">  WRONG_DIM_Z,</div>
<div class="line">  WRONG_DIM_u,</div>
<div class="line"> </div>
<div class="line">  PARAM_OOB,</div>
<div class="line"> </div>
<div class="line">  FWD_COUNTS_MISMATCH,</div>
<div class="line">  FWD_FO_KEEP,</div>
<div class="line">  FWD_ZO_KEEP,</div>
<div class="line"> </div>
<div class="line">  DIRGRAD_NOT_ENOUGH_DIRS,</div>
<div class="line"> </div>
<div class="line">  SPARSE_BAD_MODE,</div>
<div class="line">  SPARSE_NO_BP,</div>
<div class="line"> </div>
<div class="line">  TAPE_DOC_COUNTS_MISMATCH,</div>
<div class="line"> </div>
<div class="line">  SPARSE_HESS_IND,</div>
<div class="line">  SPARSE_CRS,</div>
<div class="line">  SPARSE_JAC_MALLOC,</div>
<div class="line">  SPARSE_JAC_NO_BP</div>
<div class="line"> </div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// wrapper for information of errors</span></div>
<div class="line"><span class="keyword">struct </span>FailInfo {</div>
<div class="line">  <span class="keywordtype">short</span> info1{0}; <span class="comment">// for tapeId</span></div>
<div class="line">  <span class="keywordtype">size_t</span> info2{0};</div>
<div class="line">  <span class="keywordtype">int</span> info3{0}; <span class="comment">// deps</span></div>
<div class="line">  <span class="keywordtype">int</span> info4{0}; <span class="comment">// num indeps</span></div>
<div class="line">  <span class="keywordtype">size_t</span> info5{0};</div>
<div class="line">  <span class="keywordtype">size_t</span> info6{0};</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> info7{0}; <span class="comment">// Operation char</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// like c++23&#39;s to_underlying</span></div>
<div class="line"><span class="comment">// help to statically cast an enum class to its parent type</span></div>
<div class="line"><span class="comment">// used e.g. for enum class that inherits from size_t</span></div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">constexpr</span> <span class="keyword">auto</span> to_underlying(T t) <span class="keyword">noexcept</span> {</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>std::underlying_type_t&lt;T&gt;<span class="keyword">&gt;</span>(t);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*--------------------------------------------------------------------------*/</span></div>
<div class="line"><span class="comment">// prints an error message describing the error type coming from a file function</span></div>
<div class="line"><span class="comment">// (e.g. fopen)</span></div>
<div class="line"><span class="keywordtype">void</span> printError();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// would like to use always CURRENT_LOCATION as default but this</span></div>
<div class="line"><span class="comment">// does not work for all compilers sometimes the funciton names are empty.</span></div>
<div class="line"><span class="comment">// Currently you have to call CURRENT_LOCATION when calling fail</span></div>
<div class="line"><span class="comment">// by hand</span></div>
<div class="line"><span class="keywordtype">void</span> fail(ErrorType error, <span class="keyword">const</span> source_location LocInfo,</div>
<div class="line">          <span class="keyword">const</span> FailInfo &amp;failinfo = FailInfo());</div>
<div class="line"> </div>
<div class="line">} <span class="comment">// namespace ADOLCError</span></div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">// ADOLC_ERROR_H</span></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
